!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("stimulus"),require("stimulus-use")):"function"==typeof define&&define.amd?define(["exports","stimulus","stimulus-use"],t):t((e||self).stimulusLibrary={},e.stimulus,e.stimulusUse)}(this,function(e,t,n){function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}var i=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.connect=function(){this.loadContent()},n.loadContent=function(){var e=this.hasReplaceTarget?this.replaceTarget:this.element;fetch(this.endpointValue).then(function(e){return e.text()}).then(function(t){var n=document.createElement("div");n.innerHTML=t,e.replaceWith(n);var r=new CustomEvent("ajax:success",{detail:""});e.dispatchEvent(r)}).catch(function(t){e.replaceWith("Sorry, this content failed to load");var n=new CustomEvent("ajax:error",{detail:""});e.dispatchEvent(n)}).finally(function(){var t=new CustomEvent("ajax:complete",{detail:""});e.dispatchEvent(t)})},t}(t.Controller);i.targets=["replace"],i.values={endpoint:String};var o=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).boundHandler=t.handler.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){var e=this;this.element.querySelectorAll("input, select, textarea").forEach(function(t){return t.addEventListener("change",e.boundHandler)})},n.disconnect=function(){var e=this;this.element.querySelectorAll("input, select, textarea").forEach(function(t){return t.removeEventListener("change",e.boundHandler)})},n.handler=function(e){this.element.dispatchEvent(new CustomEvent("submit",{bubbles:!0,cancelable:!0}))},t}(t.Controller),a=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).boundHandler=t.handler.bind(s(t)),t}r(t,e);var i=t.prototype;return i.connect=function(){var e=this.element;e.style.resize="none",e.style.boxSizing="border-box",n.useWindowResize(this),setTimeout(this.boundHandler,1e3),e.addEventListener("input",this.boundHandler),e.addEventListener("focus",this.boundHandler)},i.windowResize=function(){this.handler()},i.handler=function(){this.autosize(this.element)},i.autosize=function(e){var t=e.offsetHeight-e.clientHeight;e.style.height="auto",e.style.height=e.scrollHeight+t+"px"},t}(t.Controller),u=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).boundHandler=t.updateCharCount.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){this.updateCharCount(),this.inputTarget.addEventListener("input",this.boundHandler)},n.disconnect=function(){this.inputTarget.removeEventListener("input",this.boundHandler)},n.updateCharCount=function(){var e=this.inputTarget.value.length;this.outputTarget.innerText=e.toString(),this.hasErrorClass&&(this.isValidCount(e)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},n.isValidCount=function(e){var t=0,n=99999;return this.hasMinValue&&(t=this.minValue),this.hasMaxValue&&(n=this.maxValue),e>=t&&e<=n},t}(t.Controller);u.targets=["input","output"],u.values={min:Number,max:Number},u.classes=["error"];var l=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).supported=!1,t}r(t,e);var n=t.prototype;return n.connect=function(){this.supported=document.queryCommandSupported("copy"),this.hasRemoveUnusedValue&&this.removeUnusedValue&&(this.supported&&this.hasFallbackTarget?this.fallbackTarget.remove():this.hasCopyTarget&&this.copyTarget.remove())},n.select=function(e){e&&e.preventDefault(),this.sourceTarget.select()},n.copy=function(e){e&&e.preventDefault(),this.sourceTarget.select(),this.supported&&document.execCommand("copy")},t}(t.Controller);l.targets=["button","copy","fallback"],l.values={removeUnused:Boolean};var c=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.connect=function(){var e=this,t=this.messageValue;window.onbeforeunload=function(){return null==t||t},window.addEventListener("popstate",this.handlePopstate),window.addEventListener("submit",function(){window.removeEventListener("popstate",e.handlePopstate),window.onbeforeunload=null})},n.handlePopstate=function(e){return!1},t}(t.Controller);c.values={message:String};var h=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).initialValue=null,t.boundHandler=t.handler.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){var e=this.element;this.initialValue=this.isInputElement(e)&&this.isCheckable(e)?e.checked:e.value,e.addEventListener("input",this.boundHandler),e.addEventListener("change",this.boundHandler)},n.disconnect=function(){var e=this.element;e.removeEventListener("input",this.boundHandler),e.removeEventListener("change",this.boundHandler)},n.restore=function(){var e=this.element;this.isInputElement(e)&&this.isCheckable(e)?e.checked=this.initialValue:e.value=this.initialValue},n.handler=function(e){var t=this.element;this.initialValue!==t.value?t.setAttribute("data-dirty","true"):t.removeAttribute("data-dirty")},n.isCheckable=function(e){return"radio"===e.type||"checkbox"===e.type},n.isInputElement=function(e){return"INPUT"===e.tagName},t}(t.Controller),d=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.connect=function(){this.toggle()},n.toggle=function(){this.hasDisablerTarget&&this.disablerTarget.checked?this.disableInputs():this.enableInputs()},n.disableInputs=function(){this.disableTargets.forEach(function(e,t){e.disabled=!0})},n.enableInputs=function(){this.disableTargets.forEach(function(e,t){e.disabled=!1})},t}(t.Controller);d.targets=["disabler","disable"];var p=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.dismiss=function(){this.element.remove()},t}(t.Controller),f=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var s=t.prototype;return s.connect=function(){n.useMutation(this,{element:this.element,childList:!0})},s.mutate=function(e){0===(this.hasScopeSelectorValue?this.element.querySelectorAll(this.scopeSelectorValue):this.element.children).length?(this.hasEmptyClass&&this.element.classList.add(this.emptyClass),this.element.dispatchEvent(new CustomEvent("dom:empty",{bubbles:!0,cancelable:!0}))):(this.hasEmptyClass&&this.element.classList.remove(this.emptyClass),this.element.dispatchEvent(new CustomEvent("dom:not-empty",{bubbles:!0,cancelable:!0})))},t}(t.Controller);f.classes=["empty"],f.values={scopeSelector:String};var g=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.connect=function(){this.toggle()},n.toggle=function(){this.hasEnablerTarget&&this.enablerTarget.checked?this.enableInputs():this.disableInputs()},n.disableInputs=function(){this.enableTargets.forEach(function(e,t){e.disabled=!0})},n.enableInputs=function(){this.enableTargets.forEach(function(e,t){e.disabled=!1})},t}(t.Controller);g.targets=["enabler","enable"];var v=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.connect=function(){var e=this,t=this.element;t.onerror=function(){e.hasPlaceholderValue?t.src=e.placeholderValue:t.style.display="none"}},t}(t.Controller);v.values={placeholder:String};var m=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var s=t.prototype;return s.connect=function(){if(this.options={element:this.element,threshold:.3},"IntersectionObserver"in window){var e=n.useIntersection(this,this.options);this.observe=e[0],this.unobserve=e[1]}else this.loadContent()},s.appear=function(e){var t=this.element;""===t.src&&e.target===t&&e.isIntersecting&&(this.loadContent(),this.unobserve&&this.unobserve())},t}(i),b=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).maxSelections=0,t.boundHandleInputs=t.handleInputs.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){var e=this;this.inputTargets.forEach(function(t){return t.addEventListener("change",e.boundHandleInputs)})},n.disconnect=function(){var e=this;this.inputTargets.forEach(function(t){return t.removeEventListener("change",e.boundHandleInputs)})},n.handleInputs=function(e){var t=this.inputTargets.reduce(function(e,t){return t.checked?e+1:e},0),n=e.target;t>this.maxSelections?(e.preventDefault(),n.checked=!1,n.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0})),n.dispatchEvent(new CustomEvent("limited-selection:too-many",{bubbles:!0,cancelable:!0,detail:{target:n}})),this.hasErrorTarget&&(this.errorTarget.innerHTML=this.messageValue)):(n.dispatchEvent(new CustomEvent("limited-selection:selection",{bubbles:!0,cancelable:!0,detail:{target:n}})),this.hasErrorTarget&&(this.errorTarget.innerHTML=""))},t}(t.Controller);b.targets=["input","error"],b.values={max:Number,message:String};var C=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).boundCheckPasswordsMatch=t.checkPasswordsMatch.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){var e=this;this.passwordTargets.forEach(function(t){return t.addEventListener("change",e.boundCheckPasswordsMatch)})},n.disconnect=function(){var e=this;this.passwordTargets.forEach(function(t){return t.removeEventListener("change",e.boundCheckPasswordsMatch)})},n.allPasswordsMatch=function(){var e=new Set(this.passwordTargets.map(function(e){return e.value}));return e.has("")||1==e.size},n.checkPasswordsMatch=function(){var e=this;this.allPasswordsMatch()?(this.element.dispatchEvent(new CustomEvent("password-confirm:match")),this.hasErrorClass&&this.passwordTargets.forEach(function(t){return t.classList.remove(e.errorClass)})):(this.element.dispatchEvent(new CustomEvent("password-confirm:no-match")),this.hasErrorClass&&this.passwordTargets.forEach(function(t){return t.classList.add(e.errorClass)}))},t}(t.Controller);C.targets=["password"],C.classes=["error"];var y=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var n=t.prototype;return n.connect=function(){},n.peak=function(e){e&&e.preventDefault(),this.passwordTarget.type="text"},n.hide=function(e){e&&e.preventDefault(),this.passwordTarget.type="password"},n.toggle=function(e){e&&e.preventDefault(),"password"===this.passwordTarget.type?this.peak():this.hide()},t}(t.Controller);y.targets=["password"];var E=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).boundMessageReceived=t.messageReceived.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){window.addEventListener("message",this.boundMessageReceived)},n.disconnect=function(){window.removeEventListener("message",this.boundMessageReceived)},n.messageReceived=function(e){var t=e.data;t.hasOwnProperty("name")&&"iframe-body"===t.name&&t.hasOwnProperty("height")&&this.resize(t.height)},n.resize=function(e){this.element.style.height=e+"px"},t}(t.Controller),T=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var s=t.prototype;return s.connect=function(){window.self!==window.top&&(n.useWindowResize(this),n.useDebounce(this,{}),this.postUpdate())},s.windowResize=function(e){this.postUpdate()},s.postUpdate=function(){var e={name:"iframe-body",height:this.getHeight()};window.parent.postMessage(e,"*")},s.getHeight=function(){var e=document.body,t=document.documentElement;return Math.max(e.scrollHeight,e.offsetHeight,t.clientHeight,t.scrollHeight,t.offsetHeight)},t}(t.Controller);T.debounces=["postUpdate"];var w=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).timeout=null,t}r(t,e);var n=t.prototype;return n.connect=function(){var e=this;this.timeout=setTimeout(function(){return e.element.remove()},1e3*this.secondsValue)},n.disconnect=function(){this.timeout&&clearTimeout(this.timeout)},t}(t.Controller);w.values={seconds:Number};var L=function(e){function t(){return e.apply(this,arguments)||this}return r(t,e),t.prototype.connect=function(){var e,t=document.querySelector(this.targetValue);if(null!=t){var n=this.element.cloneNode(!0);switch(n.removeAttribute(this.identifier+"-insert-adjacent-html-value"),n.setAttribute("data-controller",(null==(e=n.getAttribute("data-controller"))?void 0:e.replace(new RegExp("(^|s)"+this.identifier+"($|s)"),""))||""),n.removeAttribute("data-controller"+this.identifier+"-insert-adjacent-html-value"),this.insertValue){case"beforebegin":case"beforeend":case"afterend":case"afterbegin":t.insertAdjacentHTML(this.insertValue,n.outerHTML);break;case"replaceOuter":t.outerHTML=n.outerHTML;break;case"replaceInner":t.innerHTML=n.outerHTML;break;case"prepend":t.insertAdjacentHTML("afterbegin",n.outerHTML);break;case"append":t.insertAdjacentHTML("beforeend",n.outerHTML)}}else this.element.dispatchEvent(new CustomEvent("teleport:error",{bubbles:!0,cancelable:!0}))},t}(t.Controller);L.values={target:String,insert:String};var H=function(e){function t(){return e.apply(this,arguments)||this}r(t,e);var s=t.prototype;return s.connect=function(){var e=this;if(this.toggleTargets.forEach("on"===this.initialValue?function(t){return e.elementOn(t)}:function(t){return e.elementOff(t)}),(this.hasMouseEnterValue||this.hasMouseLeaveValue)&&n.useHover(this),this.hasClickAwayValue&&this.clickAwayValue&&n.useClickOutside(this),!this.hasClassValue)throw new Error("data-toggle-class-class-value must not be empty")},s.clickOutside=function(){var e=this;this.toggleTargets.forEach(function(t){e.elementWasToggled(t)&&(e.elementToggleStatus(t),e.elementToggle(t))})},s.mouseEnter=function(){if(this.hasMouseEnterValue)switch(this.mouseEnterValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},s.mouseLeave=function(){if(this.hasMouseLeaveValue)switch(this.mouseLeaveValue){case"on":this.off();break;case"off":this.on();break;case"toggle":this.toggle()}return{}},s.on=function(e){var t=this;this.toggleTargets.forEach(function(e){t.elementToggleStatus(e),t.elementOn(e)})},s.off=function(e){var t=this;this.toggleTargets.forEach(function(e){t.elementToggleStatus(e),t.elementOff(e)})},s.toggle=function(e){var t=this;this.toggleTargets.forEach(function(e){t.elementToggleStatus(e),t.elementToggle(e)})},s.elementWasToggled=function(e){return"true"==e.dataset.toggled},s.elementToggleStatus=function(e){this.elementWasToggled(e)?delete e.dataset.toggled:e.dataset.toggled="true"},s.elementToggle=function(e){this.classValue.split(" ").forEach(function(t){return e.classList.toggle(t)})},s.elementOn=function(e){this.classValue.split(" ").forEach(function(t){return e.classList.toggle(t,!0)})},s.elementOff=function(e){this.classValue.split(" ").forEach(function(t){return e.classList.toggle(t,!1)})},t}(t.Controller);H.targets=["toggle"],H.values={class:String,mouseEnter:String,mouseLeave:String,clickAway:Boolean,initial:Boolean};var V=function(e){function t(){var t;return(t=e.apply(this,arguments)||this).boundHandler=t.updateWordCount.bind(s(t)),t}r(t,e);var n=t.prototype;return n.connect=function(){this.updateWordCount(),this.inputTarget.addEventListener("input",this.boundHandler)},n.disconnect=function(){this.inputTarget.removeEventListener("input",this.boundHandler)},n.updateWordCount=function(){var e=0,t=this.inputTarget.value.match(/\S+/g);this.outputTarget.innerText=(e=t&&t.length||0).toString(),this.hasErrorClass&&(this.isValidCount(e)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},n.isValidCount=function(e){var t=0,n=99999;return this.hasMinValue&&(t=this.minValue),this.hasMaxValue&&(n=this.maxValue),e>=t&&e<=n},t}(t.Controller);V.targets=["input","output"],V.values={min:Number,max:Number},V.classes=["error"],e.AsyncBlockController=i,e.AutoSubmitFormController=o,e.AutosizeController=a,e.CharCountController=u,e.ClipboardController=l,e.ConfirmNavigationController=c,e.DetectDirtyController=h,e.DisableInputsController=d,e.DismissableController=p,e.EmptyDomController=f,e.EnableInputsController=g,e.FallbackImageController=v,e.LazyBlockController=m,e.LimitedSelectionCheckboxesController=b,e.PasswordConfirmController=C,e.PasswordPeekController=y,e.ResponsiveIframeBodyController=T,e.ResponsiveIframeWrapperController=E,e.SelfDestructController=w,e.TeleportController=L,e.ToggleClassController=H,e.WordCountController=V});
//# sourceMappingURL=stimulus-library.umd.js.map
