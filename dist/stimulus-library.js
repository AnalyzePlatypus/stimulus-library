var t=require("stimulus"),e=require("stimulus-use");function n(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function r(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var s=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.connect=function(){this.loadContent()},r.loadContent=function(){var t=this.hasReplaceTarget?this.replaceTarget:this.element;fetch(this.endpointValue).then(function(t){return t.text()}).then(function(e){var n=document.createElement("div");n.innerHTML=e,t.replaceWith(n);var r=new CustomEvent("ajax:success",{detail:""});t.dispatchEvent(r)}).catch(function(e){t.replaceWith("Sorry, this content failed to load");var n=new CustomEvent("ajax:error",{detail:""});t.dispatchEvent(n)}).finally(function(){var e=new CustomEvent("ajax:complete",{detail:""});t.dispatchEvent(e)})},e}(t.Controller);s.targets=["replace"],s.values={endpoint:String};var o=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).boundHandler=e.handler.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){var t=this;this.element.querySelectorAll("input, select, textarea").forEach(function(e){return e.addEventListener("change",t.boundHandler)})},s.disconnect=function(){var t=this;this.element.querySelectorAll("input, select, textarea").forEach(function(e){return e.removeEventListener("change",t.boundHandler)})},s.handler=function(t){this.element.dispatchEvent(new CustomEvent("submit",{bubbles:!0,cancelable:!0}))},e}(t.Controller),i=function(t){function s(){var e;return(e=t.apply(this,arguments)||this).boundHandler=e.handler.bind(r(e)),e}n(s,t);var o=s.prototype;return o.connect=function(){var t=this.element;t.style.resize="none",t.style.boxSizing="border-box",e.useWindowResize(this),setTimeout(this.boundHandler,1e3),t.addEventListener("input",this.boundHandler),t.addEventListener("focus",this.boundHandler)},o.windowResize=function(){this.handler()},o.handler=function(){this.autosize(this.element)},o.autosize=function(t){var e=t.offsetHeight-t.clientHeight;t.style.height="auto",t.style.height=t.scrollHeight+e+"px"},s}(t.Controller),a=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).boundHandler=e.updateCharCount.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){this.updateCharCount(),this.inputTarget.addEventListener("input",this.boundHandler)},s.disconnect=function(){this.inputTarget.removeEventListener("input",this.boundHandler)},s.updateCharCount=function(){var t=this.inputTarget.value.length;this.outputTarget.innerText=t.toString(),this.hasErrorClass&&(this.isValidCount(t)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},s.isValidCount=function(t){var e=0,n=99999;return this.hasMinValue&&(e=this.minValue),this.hasMaxValue&&(n=this.maxValue),t>=e&&t<=n},e}(t.Controller);a.targets=["input","output"],a.values={min:Number,max:Number},a.classes=["error"];var l=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).supported=!1,e}n(e,t);var r=e.prototype;return r.connect=function(){this.supported=document.queryCommandSupported("copy"),this.hasRemoveUnusedValue&&this.removeUnusedValue&&(this.supported&&this.hasFallbackTarget?this.fallbackTarget.remove():this.hasCopyTarget&&this.copyTarget.remove())},r.select=function(t){t&&t.preventDefault(),this.sourceTarget.select()},r.copy=function(t){t&&t.preventDefault(),this.sourceTarget.select(),this.supported&&document.execCommand("copy")},e}(t.Controller);l.targets=["button","copy","fallback"],l.values={removeUnused:Boolean};var u=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.connect=function(){var t=this,e=this.messageValue;window.onbeforeunload=function(){return null==e||e},window.addEventListener("popstate",this.handlePopstate),window.addEventListener("submit",function(){window.removeEventListener("popstate",t.handlePopstate),window.onbeforeunload=null})},r.handlePopstate=function(t){return!1},e}(t.Controller);u.values={message:String};var c=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.connect=function(){console.log("Debug Controller",this.testTargets)},e}(t.Controller);c.targets=["test"];var h=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).initialValue=null,e.boundHandler=e.handler.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){var t=this.element;this.initialValue=this.isInputElement(t)&&this.isCheckable(t)?t.checked:t.value,t.addEventListener("input",this.boundHandler),t.addEventListener("change",this.boundHandler)},s.disconnect=function(){var t=this.element;t.removeEventListener("input",this.boundHandler),t.removeEventListener("change",this.boundHandler)},s.restore=function(){var t=this.element;this.isInputElement(t)&&this.isCheckable(t)?t.checked=this.initialValue:t.value=this.initialValue},s.handler=function(t){var e=this.element;this.initialValue!==e.value?e.setAttribute("data-dirty","true"):e.removeAttribute("data-dirty")},s.isCheckable=function(t){return"radio"===t.type||"checkbox"===t.type},s.isInputElement=function(t){return"INPUT"===t.tagName},e}(t.Controller),d=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.connect=function(){this.toggle()},r.toggle=function(){this.hasDisablerTarget&&this.disablerTarget.checked?this.disableInputs():this.enableInputs()},r.disableInputs=function(){this.disableTargets.forEach(function(t,e){t.disabled=!0})},r.enableInputs=function(){this.disableTargets.forEach(function(t,e){t.disabled=!1})},e}(t.Controller);d.targets=["disabler","disable"];var p=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.dismiss=function(){this.element.remove()},e}(t.Controller),f=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var s=r.prototype;return s.connect=function(){e.useMutation(this,{element:this.element,childList:!0})},s.mutate=function(t){0===(this.hasScopeSelectorValue?this.element.querySelectorAll(this.scopeSelectorValue):this.element.children).length?(this.hasNotEmptyClass&&this.element.classList.remove(this.notEmptyClass),this.hasEmptyClass&&this.element.classList.add(this.emptyClass),this.element.dispatchEvent(new CustomEvent("dom:empty",{bubbles:!0,cancelable:!0}))):(this.hasNotEmptyClass&&this.element.classList.add(this.notEmptyClass),this.hasEmptyClass&&this.element.classList.remove(this.emptyClass),this.element.dispatchEvent(new CustomEvent("dom:not-empty",{bubbles:!0,cancelable:!0})))},r}(t.Controller);f.classes=["empty","notEmpty"],f.values={scopeSelector:String};var g=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.connect=function(){this.toggle()},r.toggle=function(){this.hasEnablerTarget&&this.enablerTarget.checked?this.enableInputs():this.disableInputs()},r.disableInputs=function(){this.enableTargets.forEach(function(t,e){t.disabled=!0})},r.enableInputs=function(){this.enableTargets.forEach(function(t,e){t.disabled=!1})},e}(t.Controller);g.targets=["enabler","enable"];var v=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.connect=function(){var t=this,e=this.element;e.onerror=function(){t.hasPlaceholderValue?e.src=t.placeholderValue:e.style.display="none"}},e}(t.Controller);v.values={placeholder:String};var m=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var s=r.prototype;return s.connect=function(){if(this.options={element:this.element,threshold:.3},"IntersectionObserver"in window){var t=e.useIntersection(this,this.options);this.observe=t[0],this.unobserve=t[1]}else this.loadContent()},s.appear=function(t){var e=this.element;""===e.src&&t.target===e&&t.isIntersecting&&(this.loadContent(),this.unobserve&&this.unobserve())},r}(s),b=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).maxSelections=0,e.boundHandleInputs=e.handleInputs.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){var t=this;this.inputTargets.forEach(function(e){return e.addEventListener("change",t.boundHandleInputs)})},s.disconnect=function(){var t=this;this.inputTargets.forEach(function(e){return e.removeEventListener("change",t.boundHandleInputs)})},s.handleInputs=function(t){var e=this.inputTargets.reduce(function(t,e){return e.checked?t+1:t},0),n=t.target;e>this.maxSelections?(t.preventDefault(),n.checked=!1,n.dispatchEvent(new CustomEvent("change",{bubbles:!0,cancelable:!0})),n.dispatchEvent(new CustomEvent("limited-selection:too-many",{bubbles:!0,cancelable:!0,detail:{target:n}})),this.hasErrorTarget&&(this.errorTarget.innerHTML=this.messageValue)):(n.dispatchEvent(new CustomEvent("limited-selection:selection",{bubbles:!0,cancelable:!0,detail:{target:n}})),this.hasErrorTarget&&(this.errorTarget.innerHTML=""))},e}(t.Controller);b.targets=["input","error"],b.values={max:Number,message:String};var C=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).boundCheckPasswordsMatch=e.checkPasswordsMatch.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){var t=this;this.passwordTargets.forEach(function(e){return e.addEventListener("change",t.boundCheckPasswordsMatch)})},s.disconnect=function(){var t=this;this.passwordTargets.forEach(function(e){return e.removeEventListener("change",t.boundCheckPasswordsMatch)})},s.allPasswordsMatch=function(){var t=new Set(this.passwordTargets.map(function(t){return t.value}));return t.has("")||1==t.size},s.checkPasswordsMatch=function(){var t=this;this.allPasswordsMatch()?(this.element.dispatchEvent(new CustomEvent("password-confirm:match")),this.hasErrorClass&&this.passwordTargets.forEach(function(e){return e.classList.remove(t.errorClass)})):(this.element.dispatchEvent(new CustomEvent("password-confirm:no-match")),this.hasErrorClass&&this.passwordTargets.forEach(function(e){return e.classList.add(t.errorClass)}))},e}(t.Controller);C.targets=["password"],C.classes=["error"];var y=function(t){function e(){return t.apply(this,arguments)||this}n(e,t);var r=e.prototype;return r.connect=function(){},r.peak=function(t){t&&t.preventDefault(),this.passwordTarget.type="text"},r.hide=function(t){t&&t.preventDefault(),this.passwordTarget.type="password"},r.toggle=function(t){t&&t.preventDefault(),"password"===this.passwordTarget.type?this.peak():this.hide()},e}(t.Controller);y.targets=["password"];var E=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).boundMessageReceived=e.messageReceived.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){window.addEventListener("message",this.boundMessageReceived)},s.disconnect=function(){window.removeEventListener("message",this.boundMessageReceived)},s.messageReceived=function(t){var e=t.data;e.hasOwnProperty("name")&&"iframe-body"===e.name&&e.hasOwnProperty("height")&&this.resize(e.height)},s.resize=function(t){this.element.style.height=t+"px"},e}(t.Controller),T=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var s=r.prototype;return s.connect=function(){window.self!==window.top&&(e.useWindowResize(this),e.useDebounce(this,{}),this.postUpdate())},s.windowResize=function(t){this.postUpdate()},s.postUpdate=function(){var t={name:"iframe-body",height:this.getHeight()};window.parent.postMessage(t,"*")},s.getHeight=function(){var t=document.body,e=document.documentElement;return Math.max(t.scrollHeight,t.offsetHeight,e.clientHeight,e.scrollHeight,e.offsetHeight)},r}(t.Controller);T.debounces=["postUpdate"];var w=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).timeout=null,e}n(e,t);var r=e.prototype;return r.connect=function(){var t=this;this.timeout=setTimeout(function(){return t.element.remove()},1e3*this.secondsValue)},r.disconnect=function(){this.timeout&&clearTimeout(this.timeout)},e}(t.Controller);w.values={seconds:Number};var L=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e.prototype.connect=function(){var t,e=document.querySelector(this.targetValue);if(null!=e){var n=this.element.cloneNode(!0);switch(n.removeAttribute(this.identifier+"-insert-adjacent-html-value"),n.setAttribute("data-controller",(null==(t=n.getAttribute("data-controller"))?void 0:t.replace(new RegExp("(^|s)"+this.identifier+"($|s)"),""))||""),n.removeAttribute("data-controller"+this.identifier+"-insert-adjacent-html-value"),this.insertValue){case"beforebegin":case"beforeend":case"afterend":case"afterbegin":e.insertAdjacentHTML(this.insertValue,n.outerHTML);break;case"replaceOuter":e.outerHTML=n.outerHTML;break;case"replaceInner":e.innerHTML=n.outerHTML;break;case"prepend":e.insertAdjacentHTML("afterbegin",n.outerHTML);break;case"append":e.insertAdjacentHTML("beforeend",n.outerHTML)}}else this.element.dispatchEvent(new CustomEvent("teleport:error",{bubbles:!0,cancelable:!0}))},e}(t.Controller);L.values={target:String,insert:String};var x=function(t){function r(){return t.apply(this,arguments)||this}n(r,t);var s=r.prototype;return s.connect=function(){var t=this;if(this.toggleTargets.forEach("on"===this.initialValue?function(e){return t.elementOn(e)}:function(e){return t.elementOff(e)}),(this.hasMouseEnterValue||this.hasMouseLeaveValue)&&e.useHover(this),this.hasClickAwayValue&&this.clickAwayValue&&e.useClickOutside(this),!this.hasClassValue)throw new Error("data-toggle-class-class-value must not be empty")},s.clickOutside=function(){var t=this;this.toggleTargets.forEach(function(e){t.elementWasToggled(e)&&(t.elementToggleStatus(e),t.elementToggle(e))})},s.mouseEnter=function(){if(this.hasMouseEnterValue)switch(this.mouseEnterValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},s.mouseLeave=function(){if(this.hasMouseLeaveValue)switch(this.mouseLeaveValue){case"on":this.on();break;case"off":this.off();break;case"toggle":this.toggle()}return{}},s.on=function(t){var e=this;this.toggleTargets.forEach(function(t){e.elementToggleStatus(t),e.elementOn(t)})},s.off=function(t){var e=this;this.toggleTargets.forEach(function(t){e.elementToggleStatus(t),e.elementOff(t)})},s.toggle=function(t){var e=this;this.toggleTargets.forEach(function(t){e.elementToggleStatus(t),e.elementToggle(t)})},s.elementWasToggled=function(t){return"true"==t.dataset.toggled},s.elementToggleStatus=function(t){this.elementWasToggled(t)?delete t.dataset.toggled:t.dataset.toggled="true"},s.elementToggle=function(t){this.classValue.split(" ").forEach(function(e){return t.classList.toggle(e)})},s.elementOn=function(t){this.classValue.split(" ").forEach(function(e){return t.classList.toggle(e,!0)})},s.elementOff=function(t){this.classValue.split(" ").forEach(function(e){return t.classList.toggle(e,!1)})},r}(t.Controller);x.targets=["toggle"],x.values={class:String,mouseEnter:String,mouseLeave:String,clickAway:Boolean,initial:String};var H=function(t){function e(){var e;return(e=t.apply(this,arguments)||this).boundHandler=e.updateWordCount.bind(r(e)),e}n(e,t);var s=e.prototype;return s.connect=function(){this.updateWordCount(),this.inputTarget.addEventListener("input",this.boundHandler)},s.disconnect=function(){this.inputTarget.removeEventListener("input",this.boundHandler)},s.updateWordCount=function(){var t=0,e=this.inputTarget.value.match(/\S+/g);this.outputTarget.innerText=(t=e&&e.length||0).toString(),this.hasErrorClass&&(this.isValidCount(t)?this.outputTarget.classList.remove(this.errorClass):this.outputTarget.classList.add(this.errorClass))},s.isValidCount=function(t){var e=0,n=99999;return this.hasMinValue&&(e=this.minValue),this.hasMaxValue&&(n=this.maxValue),t>=e&&t<=n},e}(t.Controller);H.targets=["input","output"],H.values={min:Number,max:Number},H.classes=["error"],exports.AsyncBlockController=s,exports.AutoSubmitFormController=o,exports.AutosizeController=i,exports.CharCountController=a,exports.ClipboardController=l,exports.ConfirmNavigationController=u,exports.DebugController=c,exports.DetectDirtyController=h,exports.DisableInputsController=d,exports.DismissableController=p,exports.EmptyDomController=f,exports.EnableInputsController=g,exports.FallbackImageController=v,exports.LazyBlockController=m,exports.LimitedSelectionCheckboxesController=b,exports.PasswordConfirmController=C,exports.PasswordPeekController=y,exports.ResponsiveIframeBodyController=T,exports.ResponsiveIframeWrapperController=E,exports.SelfDestructController=w,exports.TeleportController=L,exports.ToggleClassController=x,exports.WordCountController=H;
//# sourceMappingURL=stimulus-library.js.map
